import{u as h,r as c,c as g,j as e,H as b}from"./app-CQdR452s.js";import{A as v}from"./AuthenticatedLayout-HhmBnaNo.js";import{C as f,F as j}from"./ProgressBar-CmNWRyn6.js";import{F as k}from"./CheckCircleIcon-CrWjMXvP.js";import"./clsx-B-dksMZM.js";import"./transition-fQBJqPoi.js";import"./use-sync-refs-TvPC7Lcg.js";import"./ThemeToggle-C9625XrB.js";import"./Footer-C1bh1EIQ.js";import"./UserGroupIcon-CBBpCl-6.js";import"./ShieldCheckIcon-DI5QGzMO.js";import"./ExclamationTriangleIcon-Yz6WaA5o.js";function z({club:s}){const{data:a,setData:n,put:x,processing:m,errors:t}=h({name:s.name,slug:s.slug,description:s.description??"",type:s.type,requires_approval:s.requires_approval??!1,city:s.city??"",province:s.province??"",theme_color:s.theme_color??""}),[o,l]=c.useState("idle"),i=c.useRef(),u=c.useCallback(r=>{if(!r||r.length<2||r===s.slug){l("idle");return}l("checking"),i.current&&clearTimeout(i.current),i.current=setTimeout(async()=>{try{const{data:d}=await g.post(route("clubs.checkSlug"),{slug:r,exclude:s.slug});l(d.available?"available":"taken")}catch{l("idle")}},400)},[s.slug]),p=r=>{const d=r.toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-");n("slug",d),u(d)},y=r=>{r.preventDefault(),x(route("clubs.update",s.slug))};return e.jsxs(v,{header:"Edit Club",children:[e.jsx(b,{title:`Edit ${s.name}`}),e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(f,{padding:"lg",children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Club Name *"}),e.jsx("input",{type:"text",value:a.name,onChange:r=>n("name",r.target.value),className:"w-full rounded-lg border-secondary-300 dark:border-secondary-600 dark:bg-secondary-800 dark:text-white focus:ring-primary-500 focus:border-primary-500"}),t.name&&e.jsx("p",{className:"text-sm text-danger-600 mt-1",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Club Handle (slug)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-secondary-400 text-sm pointer-events-none",children:"/clubs/"}),e.jsx("input",{type:"text",value:a.slug,onChange:r=>p(r.target.value),className:"w-full rounded-lg border-secondary-300 dark:border-secondary-600 dark:bg-secondary-800 dark:text-white focus:ring-primary-500 focus:border-primary-500 pl-16 pr-10"}),e.jsxs("span",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:[o==="checking"&&e.jsxs("svg",{className:"animate-spin h-5 w-5 text-secondary-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),o==="available"&&e.jsx(k,{className:"h-5 w-5 text-success-500"}),o==="taken"&&e.jsx(j,{className:"h-5 w-5 text-danger-500"})]})]}),o==="taken"&&e.jsx("p",{className:"text-sm text-danger-600 mt-1",children:"This slug is already taken."}),o==="available"&&e.jsx("p",{className:"text-sm text-success-600 mt-1",children:"This slug is available!"}),t.slug&&e.jsx("p",{className:"text-sm text-danger-600 mt-1",children:t.slug}),e.jsx("p",{className:"text-xs text-secondary-400 mt-1",children:"Only lowercase letters, numbers, and hyphens."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:r=>n("description",r.target.value),rows:3,className:"w-full rounded-lg border-secondary-300 dark:border-secondary-600 dark:bg-secondary-800 dark:text-white focus:ring-primary-500 focus:border-primary-500"}),t.description&&e.jsx("p",{className:"text-sm text-danger-600 mt-1",children:t.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Club Type *"}),e.jsxs("select",{value:a.type,onChange:r=>n("type",r.target.value),className:"w-full rounded-lg border-secondary-300 dark:border-secondary-600 dark:bg-secondary-800 dark:text-white focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"public",children:"Public"}),e.jsx("option",{value:"private",children:"Private"}),e.jsx("option",{value:"secret",children:"Secret"})]})]}),a.type!=="private"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300",children:"Require Join Approval"}),e.jsx("p",{className:"text-xs text-secondary-400 mt-0.5",children:"New members must be approved before joining."})]}),e.jsx("button",{type:"button",onClick:()=>n("requires_approval",!a.requires_approval),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${a.requires_approval?"bg-primary-600":"bg-secondary-300 dark:bg-secondary-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a.requires_approval?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"City"}),e.jsx("input",{type:"text",value:a.city,onChange:r=>n("city",r.target.value),className:"w-full rounded-lg border-secondary-300 dark:border-secondary-600 dark:bg-secondary-800 dark:text-white focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Province"}),e.jsx("input",{type:"text",value:a.province,onChange:r=>n("province",r.target.value),className:"w-full rounded-lg border-secondary-300 dark:border-secondary-600 dark:bg-secondary-800 dark:text-white focus:ring-primary-500 focus:border-primary-500"})]})]}),s.is_premium&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Theme Color"}),e.jsx("input",{type:"color",value:a.theme_color||"#6366f1",onChange:r=>n("theme_color",r.target.value),className:"w-16 h-10 rounded-lg border-secondary-300 dark:border-secondary-600 cursor-pointer"}),t.theme_color&&e.jsx("p",{className:"text-sm text-danger-600 mt-1",children:t.theme_color})]}),t.tier&&e.jsx("p",{className:"text-sm text-danger-600",children:t.tier}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("a",{href:route("clubs.show",s.slug),className:"px-6 py-3 border border-secondary-300 dark:border-secondary-600 text-secondary-700 dark:text-secondary-300 rounded-lg font-semibold text-sm transition-colors hover:bg-secondary-50 dark:hover:bg-secondary-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m||o==="taken",className:"px-6 py-3 bg-primary-600 hover:bg-primary-500 text-white rounded-lg font-semibold text-sm transition-colors disabled:opacity-50",children:m?"Saving...":"Save Changes"})]})]})})})]})}export{z as default};
