import{r as n,u as v,j as e,H as A,b as D}from"./app-D88tLSm9.js";import{A as R,d as M}from"./AuthenticatedLayout-CML75vku.js";import{C as u,B as y}from"./ProgressBar-BBpyGWGO.js";import{c as f}from"./clsx-B-dksMZM.js";import{E as O}from"./EmptyState-BYA-8idt.js";import{I as i,T as p,a as l}from"./TextInput-DrDPFSwk.js";import{P as N}from"./PrimaryButton-DvmSZHph.js";import{S as j}from"./SecondaryButton-lJ0hrUth.js";import{D as B}from"./DangerButton-CdnaeX0J.js";import{S as b}from"./Switch-DqiFVDmA.js";import{M as g}from"./Modal-vms6jKq9.js";import{F as P,a as $}from"./PhoneIcon-CxRNuxzT.js";import{F as w}from"./UserCircleIcon-ByhNLLsq.js";import{F as I}from"./PencilIcon-C9l_wQ85.js";import{F as L}from"./TrashIcon-C-TnFYMp.js";import{F as q}from"./PlusIcon-B4cxMY5h.js";import"./transition-DJz0ufxq.js";import"./ThemeToggle-88hddeof.js";import"./ExclamationTriangleIcon-DfQTTYBE.js";import"./CheckCircleIcon-iTHmfw7z.js";import"./keyboard-B2YLUBIi.js";function W({title:o,titleId:c,...t},d){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":c},t),o?n.createElement("title",{id:c},o):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.143 17.082a24.248 24.248 0 0 0 3.844.148m-3.844-.148a23.856 23.856 0 0 1-5.455-1.31 8.964 8.964 0 0 0 2.3-5.542m3.155 6.852a3 3 0 0 0 5.667 1.97m1.965-2.277L21 21m-4.225-4.225a23.81 23.81 0 0 0 3.536-1.003A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6.53 6.53m10.245 10.245L6.53 6.53M3 3l3.53 3.53"}))}const z=n.forwardRef(W),C=["Spouse","Parent","Sibling","Child","Friend","Partner","Other"];function ce({contacts:o}){const[c,t]=n.useState(!1),[d,m]=n.useState(null),[h,x]=n.useState(null),r=v({name:"",phone:"",relationship:"",notify_on_sos:!0}),a=v({name:"",phone:"",relationship:"",notify_on_sos:!0}),k=s=>{s.preventDefault(),r.post(route("sos.contacts.store"),{onSuccess:()=>{t(!1),r.reset()}})},S=s=>{m(s),a.setData({name:s.name,phone:s.phone,relationship:s.relationship||"",notify_on_sos:s.notify_on_sos})},F=s=>{s.preventDefault(),d&&a.put(route("sos.contacts.update",d.id),{onSuccess:()=>{m(null),a.reset()}})},_=()=>{h&&D.delete(route("sos.contacts.destroy",h.id),{onSuccess:()=>{x(null)}})};return e.jsxs(R,{header:"Emergency Contacts",children:[e.jsx(A,{title:"Emergency Contacts"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(u,{className:"bg-primary-50 dark:bg-primary-900/20 border-primary-200 dark:border-primary-800",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(P,{className:"h-6 w-6 text-primary-600 dark:text-primary-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-primary-900 dark:text-primary-100",children:"Why add emergency contacts?"}),e.jsx("p",{className:"text-sm text-primary-700 dark:text-primary-300 mt-1",children:"In case of an emergency, these people will be notified with your location. Add trusted family members or friends who can help in an emergency."})]})]})}),o.length>0?e.jsx("div",{className:"space-y-3",children:o.map((s,E)=>e.jsx(u,{className:"relative",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-secondary-100 dark:bg-secondary-800 flex items-center justify-center flex-shrink-0",children:e.jsx(w,{className:"h-7 w-7 text-secondary-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-secondary-900 dark:text-white",children:s.name}),E===0&&e.jsx(y,{variant:"primary",size:"sm",children:"Primary"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-secondary-500 dark:text-secondary-400 mt-1",children:[e.jsx($,{className:"h-4 w-4"}),s.phone]}),s.relationship&&e.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400 mt-1",children:s.relationship}),e.jsx("div",{className:"flex items-center gap-1 mt-2",children:s.notify_on_sos?e.jsxs(y,{variant:"success",size:"sm",children:[e.jsx(M,{className:"h-3 w-3 mr-1"}),"Will be notified"]}):e.jsxs(y,{variant:"secondary",size:"sm",children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),"Won't be notified"]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>S(s),className:"p-2 text-secondary-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e.jsx(I,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>x(s),className:"p-2 text-secondary-400 hover:text-danger-600 dark:hover:text-danger-400 transition-colors",children:e.jsx(L,{className:"h-5 w-5"})})]})]})},s.id))}):e.jsx(u,{children:e.jsx(O,{icon:e.jsx(w,{className:"h-8 w-8"}),title:"No emergency contacts",description:"Add someone who can be notified in case of an emergency",action:{label:"Add Contact",onClick:()=>t(!0)}})}),o.length>0&&e.jsxs("button",{onClick:()=>t(!0),className:f("w-full flex items-center justify-center gap-2 p-4 rounded-xl","border-2 border-dashed border-secondary-300 dark:border-secondary-600","text-secondary-600 dark:text-secondary-400","hover:border-primary-400 hover:text-primary-600","dark:hover:border-primary-500 dark:hover:text-primary-400","transition-colors"),children:[e.jsx(q,{className:"h-5 w-5"}),"Add Another Contact"]})]}),e.jsx(g,{show:c,onClose:()=>t(!1),children:e.jsxs("form",{onSubmit:k,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-4",children:"Add Emergency Contact"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"add-name",value:"Name"}),e.jsx(p,{id:"add-name",value:r.data.name,onChange:s=>r.setData("name",s.target.value),placeholder:"Contact's full name",className:"mt-1",required:!0}),e.jsx(l,{message:r.errors.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"add-phone",value:"Phone Number"}),e.jsx(p,{id:"add-phone",type:"tel",value:r.data.phone,onChange:s=>r.setData("phone",s.target.value),placeholder:"e.g., 09123456789",className:"mt-1",required:!0}),e.jsx(l,{message:r.errors.phone,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"add-relationship",value:"Relationship (Optional)"}),e.jsxs("select",{id:"add-relationship",value:r.data.relationship,onChange:s=>r.setData("relationship",s.target.value),className:f("w-full rounded-lg border px-4 py-3 text-sm mt-1","border-secondary-300 bg-white text-secondary-900","focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none","dark:border-secondary-600 dark:bg-secondary-800 dark:text-secondary-100"),children:[e.jsx("option",{value:"",children:"Select relationship"}),C.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx(l,{message:r.errors.relationship,className:"mt-2"})]}),e.jsx("div",{className:"pt-2",children:e.jsx(b,{checked:r.data.notify_on_sos,onChange:s=>r.setData("notify_on_sos",s),label:"Notify on SOS",description:"Send SMS alert when SOS is triggered"})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(j,{type:"button",onClick:()=>t(!1),children:"Cancel"}),e.jsx(N,{type:"submit",disabled:r.processing,children:r.processing?"Adding...":"Add Contact"})]})]})}),e.jsx(g,{show:!!d,onClose:()=>m(null),children:e.jsxs("form",{onSubmit:F,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-4",children:"Edit Emergency Contact"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"edit-name",value:"Name"}),e.jsx(p,{id:"edit-name",value:a.data.name,onChange:s=>a.setData("name",s.target.value),placeholder:"Contact's full name",className:"mt-1",required:!0}),e.jsx(l,{message:a.errors.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"edit-phone",value:"Phone Number"}),e.jsx(p,{id:"edit-phone",type:"tel",value:a.data.phone,onChange:s=>a.setData("phone",s.target.value),placeholder:"e.g., 09123456789",className:"mt-1",required:!0}),e.jsx(l,{message:a.errors.phone,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"edit-relationship",value:"Relationship (Optional)"}),e.jsxs("select",{id:"edit-relationship",value:a.data.relationship,onChange:s=>a.setData("relationship",s.target.value),className:f("w-full rounded-lg border px-4 py-3 text-sm mt-1","border-secondary-300 bg-white text-secondary-900","focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none","dark:border-secondary-600 dark:bg-secondary-800 dark:text-secondary-100"),children:[e.jsx("option",{value:"",children:"Select relationship"}),C.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx(l,{message:a.errors.relationship,className:"mt-2"})]}),e.jsx("div",{className:"pt-2",children:e.jsx(b,{checked:a.data.notify_on_sos,onChange:s=>a.setData("notify_on_sos",s),label:"Notify on SOS",description:"Send SMS alert when SOS is triggered"})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(j,{type:"button",onClick:()=>m(null),children:"Cancel"}),e.jsx(N,{type:"submit",disabled:a.processing,children:a.processing?"Saving...":"Save Changes"})]})]})}),e.jsx(g,{show:!!h,onClose:()=>x(null),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Remove Emergency Contact?"}),e.jsxs("p",{className:"mt-2 text-sm text-secondary-500 dark:text-secondary-400",children:["Are you sure you want to remove"," ",e.jsx("span",{className:"font-medium text-secondary-900 dark:text-white",children:h?.name})," ","from your emergency contacts? They will no longer be notified in case of an emergency."]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(j,{onClick:()=>x(null),children:"Cancel"}),e.jsx(B,{onClick:_,children:"Remove Contact"})]})]})})]})}export{ce as default};
