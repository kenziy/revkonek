import{r as i,u as y,j as e,H as n,L as m}from"./app-CQdR452s.js";import{A as d}from"./AuthenticatedLayout-HhmBnaNo.js";import{C as f,A as g}from"./ProgressBar-CmNWRyn6.js";import{F as l}from"./ArrowLeftIcon-DH5-a9EN.js";import{F as j}from"./ChatBubbleLeftRightIcon-Cykj2dM4.js";import"./clsx-B-dksMZM.js";import"./transition-fQBJqPoi.js";import"./use-sync-refs-TvPC7Lcg.js";import"./ThemeToggle-C9625XrB.js";import"./Footer-C1bh1EIQ.js";import"./UserGroupIcon-CBBpCl-6.js";import"./ShieldCheckIcon-DI5QGzMO.js";import"./ExclamationTriangleIcon-Yz6WaA5o.js";import"./CheckCircleIcon-CrWjMXvP.js";function v({title:t,titleId:r,...o},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},o),t?i.createElement("title",{id:r},t):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const w=i.forwardRef(v);function P({club:t,messages:r,hasChatAccess:o}){const{data:s,setData:c,post:x,processing:h,reset:p}=y({message:""}),u=a=>{a.preventDefault(),s.message.trim()&&x(route("clubs.chat.send",t.slug),{onSuccess:()=>p()})};return o?e.jsxs(d,{header:`${t.name} — Chat`,children:[e.jsx(n,{title:`${t.name} Chat`}),e.jsxs(m,{href:route("clubs.show",t.slug),className:"inline-flex items-center gap-1.5 text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 mb-4",children:[e.jsx(l,{className:"h-4 w-4"}),"Back to ",t.name]}),e.jsxs("div",{className:"flex flex-col h-[calc(100vh-12rem)]",children:[e.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:r.data.length>0?[...r.data].reverse().map(a=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(g,{name:a.user?.display_name,size:"sm"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:a.user?.display_name}),e.jsx("span",{className:"text-xs text-secondary-400",children:new Date(a.created_at).toLocaleTimeString("en",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("p",{className:"text-sm text-secondary-700 dark:text-secondary-300 mt-0.5",children:a.message})]})]},a.id)):e.jsx("div",{className:"text-center text-sm text-secondary-500 dark:text-secondary-400 py-8",children:"No messages yet. Start the conversation!"})}),e.jsxs("form",{onSubmit:u,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s.message,onChange:a=>c("message",a.target.value),className:"flex-1 rounded-lg border-secondary-300 dark:border-secondary-600 dark:bg-secondary-800 dark:text-white focus:ring-primary-500 focus:border-primary-500",placeholder:"Type a message...",maxLength:1e3}),e.jsx("button",{type:"submit",disabled:h||!s.message.trim(),className:"px-4 py-2 bg-primary-600 hover:bg-primary-500 text-white rounded-lg transition-colors disabled:opacity-50",children:e.jsx(w,{className:"h-5 w-5"})})]})]})]}):e.jsxs(d,{header:`${t.name} — Chat`,children:[e.jsx(n,{title:`${t.name} Chat`}),e.jsxs(m,{href:route("clubs.show",t.slug),className:"inline-flex items-center gap-1.5 text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 mb-4",children:[e.jsx(l,{className:"h-4 w-4"}),"Back to ",t.name]}),e.jsx(f,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"h-16 w-16 text-secondary-300 dark:text-secondary-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Chat is a Pro Feature"}),e.jsx("p",{className:"text-secondary-500 dark:text-secondary-400 mt-2 max-w-md mx-auto",children:"Upgrade your club to Pro to unlock real-time chat for all members."})]})})]})}export{P as default};
