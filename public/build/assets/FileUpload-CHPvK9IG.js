import{r as a,j as r}from"./app-CQdR452s.js";import{c as k}from"./clsx-B-dksMZM.js";import{a as F}from"./ProgressBar-CmNWRyn6.js";import{F as $}from"./PhotoIcon-vqosI-5a.js";function B({title:i,titleId:o,...c},d){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":o},c),i?a.createElement("title",{id:o},i):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"}))}const U=a.forwardRef(B);function H({accept:i="image/*",multiple:o=!1,maxSize:c=5*1024*1024,onChange:d,preview:g=!0,disabled:p=!1,error:D,className:E}){const y=a.useRef(null),[m,v]=a.useState([]),[u,j]=a.useState([]),[R,h]=a.useState(!1),[A,w]=a.useState(null),b=e=>{if(!e)return;const t=[],n=[];if(Array.from(e).forEach(s=>{if(s.size>c){w(`File "${s.name}" exceeds ${c/1024/1024}MB limit`);return}if(t.push(s),g&&s.type.startsWith("image/")){const l=new FileReader;l.onload=L=>{n.push(L.target?.result),n.length===t.filter(M=>M.type.startsWith("image/")).length&&j(o?[...u,...n]:n)},l.readAsDataURL(s)}}),t.length>0){w(null);const s=o?[...m,...t]:t;v(s),d(s)}},C=e=>{b(e.target.files)},f=e=>{e.preventDefault(),e.stopPropagation(),e.type==="dragenter"||e.type==="dragover"?h(!0):e.type==="dragleave"&&h(!1)},P=e=>{e.preventDefault(),e.stopPropagation(),h(!1),b(e.dataTransfer.files)},N=e=>{const t=m.filter((s,l)=>l!==e),n=u.filter((s,l)=>l!==e);v(t),j(n),d(t)},x=D||A;return r.jsxs("div",{className:E,children:[r.jsxs("div",{onClick:()=>!p&&y.current?.click(),onDragEnter:f,onDragLeave:f,onDragOver:f,onDrop:p?void 0:P,className:k("relative flex flex-col items-center justify-center p-6 rounded-xl border-2 border-dashed","transition-colors duration-200 cursor-pointer",R?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":["border-secondary-300 dark:border-secondary-600","hover:border-primary-400 hover:bg-secondary-50","dark:hover:bg-secondary-800/50"],p&&"opacity-50 cursor-not-allowed",x&&"border-danger-500"),children:[r.jsx(U,{className:"h-10 w-10 text-secondary-400 mb-3"}),r.jsx("p",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300",children:"Drop files here or click to upload"}),r.jsxs("p",{className:"text-xs text-secondary-500 mt-1",children:["Max size: ",c/1024/1024,"MB"]}),r.jsx("input",{ref:y,type:"file",accept:i,multiple:o,onChange:C,disabled:p,className:"hidden"})]}),x&&r.jsx("p",{className:"mt-2 text-sm text-danger-600 dark:text-danger-400",children:x}),g&&u.length>0&&r.jsx("div",{className:"mt-4 grid grid-cols-3 gap-3",children:u.map((e,t)=>r.jsxs("div",{className:"relative group",children:[r.jsx("img",{src:e,alt:`Preview ${t+1}`,className:"h-24 w-full object-cover rounded-lg"}),r.jsx("button",{type:"button",onClick:()=>N(t),className:k("absolute top-1 right-1 p-1 rounded-full","bg-black/50 text-white","opacity-0 group-hover:opacity-100","transition-opacity duration-200"),children:r.jsx(F,{className:"h-4 w-4"})})]},t))}),!g&&m.length>0&&r.jsx("ul",{className:"mt-4 space-y-2",children:m.map((e,t)=>r.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-secondary-50 dark:bg-secondary-800",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($,{className:"h-5 w-5 text-secondary-400"}),r.jsx("span",{className:"text-sm text-secondary-700 dark:text-secondary-300 truncate max-w-[200px]",children:e.name})]}),r.jsx("button",{type:"button",onClick:()=>N(t),className:"p-1 text-secondary-400 hover:text-danger-500",children:r.jsx(F,{className:"h-4 w-4"})})]},t))})]})}export{H as F};
