import{r as n,j as e,H as j,L as y,a as u}from"./app-CQdR452s.js";import{A as g}from"./AdminLayout-CdA9hG_1.js";import{C as r,B as c}from"./ProgressBar-CmNWRyn6.js";import"./clsx-B-dksMZM.js";import"./ThemeToggle-C9625XrB.js";import"./UserGroupIcon-CBBpCl-6.js";import"./UsersIcon-C67WalTO.js";import"./SparklesIcon-B2_IIVCR.js";import"./DocumentTextIcon-DMZyM2rq.js";import"./ClipboardDocumentListIcon-ZEZdHuTT.js";import"./ArrowLeftIcon-DH5-a9EN.js";import"./ExclamationTriangleIcon-Yz6WaA5o.js";import"./CheckCircleIcon-CrWjMXvP.js";const p={pending_verification:"warning",active:"success",expired:"secondary",rejected:"danger",cancelled:"secondary"},N={pending_verification:"Pending Verification",active:"Active",expired:"Expired",rejected:"Rejected",cancelled:"Cancelled"};function q({subscription:t}){const[s,a]=n.useState(null),[d,i]=n.useState(""),[l,o]=n.useState(!1),m=()=>{s==="reject"&&!d.trim()||(o(!0),u.post(route("admin.club-subscriptions.verify",t.id),{action:s,admin_note:d||null},{onFinish:()=>o(!1),onSuccess:()=>a(null)}))},x=t.status==="pending_verification";return e.jsxs(g,{header:"Subscription Detail",children:[e.jsx(j,{title:"Admin - Subscription Detail"}),e.jsx("div",{className:"mb-4",children:e.jsx(y,{href:route("admin.club-subscriptions.index"),className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400",children:"← Back to Subscriptions"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(r,{children:[e.jsx("h3",{className:"font-semibold text-secondary-900 dark:text-white mb-4",children:"Payment Receipt"}),e.jsx("div",{className:"rounded-lg overflow-hidden bg-secondary-100 dark:bg-secondary-700",children:e.jsx("img",{src:`/storage/${t.receipt_path}`,alt:"Payment Receipt",className:"w-full max-h-[600px] object-contain"})})]}),e.jsxs(r,{children:[e.jsx("h3",{className:"font-semibold text-secondary-900 dark:text-white mb-4",children:"Subscription Details"}),e.jsxs("dl",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-secondary-500 dark:text-secondary-400",children:"Club"}),e.jsx("dd",{className:"font-medium text-secondary-900 dark:text-white mt-1",children:t.club?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-secondary-500 dark:text-secondary-400",children:"Requested By"}),e.jsxs("dd",{className:"font-medium text-secondary-900 dark:text-white mt-1",children:[t.requester?.name||"N/A",t.requester?.email&&e.jsxs("span",{className:"text-secondary-400 ml-1",children:["(",t.requester.email,")"]})]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-secondary-500 dark:text-secondary-400",children:"Amount"}),e.jsxs("dd",{className:"font-medium text-secondary-900 dark:text-white mt-1",children:["₱",Number(t.amount).toLocaleString(),t.coupon&&e.jsxs("span",{className:"text-secondary-400 ml-1",children:["(original: ₱",Number(t.original_amount).toLocaleString(),")"]})]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-secondary-500 dark:text-secondary-400",children:"Coupon"}),e.jsx("dd",{className:"font-medium text-secondary-900 dark:text-white mt-1",children:t.coupon?e.jsx(c,{variant:"info",size:"sm",children:t.coupon.code}):"—"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-secondary-500 dark:text-secondary-400",children:"Status"}),e.jsx("dd",{className:"mt-1",children:e.jsx(c,{variant:p[t.status],size:"sm",children:N[t.status]})})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-secondary-500 dark:text-secondary-400",children:"Submitted"}),e.jsx("dd",{className:"font-medium text-secondary-900 dark:text-white mt-1",children:new Date(t.created_at).toLocaleString()})]}),t.starts_at&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-secondary-500 dark:text-secondary-400",children:"Starts At"}),e.jsx("dd",{className:"font-medium text-secondary-900 dark:text-white mt-1",children:new Date(t.starts_at).toLocaleString()})]}),t.ends_at&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-secondary-500 dark:text-secondary-400",children:"Ends At"}),e.jsx("dd",{className:"font-medium text-secondary-900 dark:text-white mt-1",children:new Date(t.ends_at).toLocaleString()})]}),t.verifier&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-secondary-500 dark:text-secondary-400",children:"Verified By"}),e.jsxs("dd",{className:"font-medium text-secondary-900 dark:text-white mt-1",children:[t.verifier.name,t.verified_at&&e.jsxs("span",{className:"text-secondary-400 ml-1",children:["on ",new Date(t.verified_at).toLocaleString()]})]})]}),t.admin_note&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("dt",{className:"text-secondary-500 dark:text-secondary-400",children:"Admin Note"}),e.jsx("dd",{className:"font-medium text-secondary-900 dark:text-white mt-1",children:t.admin_note})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[x&&e.jsxs(r,{children:[e.jsx("h3",{className:"font-semibold text-secondary-900 dark:text-white mb-3",children:"Admin Actions"}),s?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(c,{variant:s==="approve"?"success":"danger",children:s==="approve"?"Approving":"Rejecting"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:["Note ",s==="reject"&&e.jsx("span",{className:"text-danger-500",children:"*"})]}),e.jsx("textarea",{value:d,onChange:h=>i(h.target.value),rows:3,className:"w-full rounded-lg border border-secondary-300 dark:border-secondary-600 bg-white dark:bg-secondary-700 text-secondary-900 dark:text-white text-sm px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:s==="reject"?"Reason for rejection (required)":"Optional note"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:m,disabled:l||s==="reject"&&!d.trim(),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-colors disabled:opacity-50 ${s==="approve"?"text-white bg-success-600 hover:bg-success-700":"text-white bg-danger-600 hover:bg-danger-700"}`,children:l?"Processing...":s==="approve"?"Confirm Approve":"Confirm Reject"}),e.jsx("button",{onClick:()=>{a(null),i("")},className:"px-4 py-2 text-sm font-medium text-secondary-600 bg-secondary-100 rounded-lg hover:bg-secondary-200 dark:bg-secondary-700 dark:text-secondary-300 transition-colors",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>a("approve"),className:"w-full px-4 py-2 text-sm font-medium text-success-600 bg-success-50 rounded-lg hover:bg-success-100 dark:bg-success-900/20 dark:text-success-400 transition-colors",children:"Approve Subscription"}),e.jsx("button",{onClick:()=>a("reject"),className:"w-full px-4 py-2 text-sm font-medium text-danger-600 bg-danger-50 rounded-lg hover:bg-danger-100 dark:bg-danger-900/20 dark:text-danger-400 transition-colors",children:"Reject Subscription"})]})]}),e.jsxs(r,{children:[e.jsx("h3",{className:"font-semibold text-secondary-900 dark:text-white mb-3",children:"Club Info"}),e.jsxs("dl",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-secondary-500",children:"Name"}),e.jsx("dd",{className:"text-secondary-900 dark:text-white font-medium",children:t.club?.name})]}),t.club?.owner&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-secondary-500",children:"Owner"}),e.jsx("dd",{className:"text-secondary-900 dark:text-white",children:t.club.owner.name})]})]})]})]})]})]})}export{q as default};
