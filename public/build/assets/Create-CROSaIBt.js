import{u as h,r as n,c as g,j as e,H as f}from"./app-CQdR452s.js";import{A as j}from"./AuthenticatedLayout-HhmBnaNo.js";import{C as v,F as k}from"./ProgressBar-CmNWRyn6.js";import{F as N}from"./CheckCircleIcon-CrWjMXvP.js";import"./clsx-B-dksMZM.js";import"./transition-fQBJqPoi.js";import"./use-sync-refs-TvPC7Lcg.js";import"./ThemeToggle-C9625XrB.js";import"./Footer-C1bh1EIQ.js";import"./UserGroupIcon-CBBpCl-6.js";import"./ShieldCheckIcon-DI5QGzMO.js";import"./ExclamationTriangleIcon-Yz6WaA5o.js";function w(r){return r.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_]+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"")}function D(){const{data:r,setData:s,post:m,processing:d,errors:t}=h({name:"",slug:"",description:"",type:"public",requires_approval:!1,city:"",province:""}),[x,p]=n.useState(!1),[l,i]=n.useState("idle"),o=n.useRef(),u=n.useCallback(a=>{if(!a||a.length<2){i("idle");return}i("checking"),o.current&&clearTimeout(o.current),o.current=setTimeout(async()=>{try{const{data:c}=await g.post(route("clubs.checkSlug"),{slug:a});i(c.available?"available":"taken")}catch{i("idle")}},400)},[]);n.useEffect(()=>{if(!x){const a=w(r.name);s("slug",a),u(a)}},[r.name]);const b=a=>{const c=a.toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-");p(!0),s("slug",c),u(c)},y=a=>{a.preventDefault(),m(route("clubs.store"))};return e.jsxs(j,{header:"Create Club",children:[e.jsx(f,{title:"Create Club"}),e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(v,{padding:"lg",children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Club Name *"}),e.jsx("input",{type:"text",value:r.name,onChange:a=>s("name",a.target.value),className:"w-full rounded-lg border-secondary-300 dark:border-secondary-600 dark:bg-secondary-800 dark:text-white focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g. Manila Riders Club"}),t.name&&e.jsx("p",{className:"text-sm text-danger-600 mt-1",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Club Handle (slug) *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-secondary-400 text-sm pointer-events-none",children:"/clubs/"}),e.jsx("input",{type:"text",value:r.slug,onChange:a=>b(a.target.value),className:"w-full rounded-lg border-secondary-300 dark:border-secondary-600 dark:bg-secondary-800 dark:text-white focus:ring-primary-500 focus:border-primary-500 pl-16 pr-10",placeholder:"manila-riders-club"}),e.jsxs("span",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:[l==="checking"&&e.jsxs("svg",{className:"animate-spin h-5 w-5 text-secondary-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),l==="available"&&e.jsx(N,{className:"h-5 w-5 text-success-500"}),l==="taken"&&e.jsx(k,{className:"h-5 w-5 text-danger-500"})]})]}),l==="taken"&&e.jsx("p",{className:"text-sm text-danger-600 mt-1",children:"This slug is already taken."}),l==="available"&&e.jsx("p",{className:"text-sm text-success-600 mt-1",children:"This slug is available!"}),t.slug&&e.jsx("p",{className:"text-sm text-danger-600 mt-1",children:t.slug}),e.jsx("p",{className:"text-xs text-secondary-400 mt-1",children:"Only lowercase letters, numbers, and hyphens. This will be your club's unique URL."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Description"}),e.jsx("textarea",{value:r.description,onChange:a=>s("description",a.target.value),rows:3,className:"w-full rounded-lg border-secondary-300 dark:border-secondary-600 dark:bg-secondary-800 dark:text-white focus:ring-primary-500 focus:border-primary-500",placeholder:"Tell riders what your club is about..."}),t.description&&e.jsx("p",{className:"text-sm text-danger-600 mt-1",children:t.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Club Type *"}),e.jsxs("select",{value:r.type,onChange:a=>s("type",a.target.value),className:"w-full rounded-lg border-secondary-300 dark:border-secondary-600 dark:bg-secondary-800 dark:text-white focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"public",children:"Public — Anyone can join"}),e.jsx("option",{value:"private",children:"Private — Request to join"}),e.jsx("option",{value:"secret",children:"Secret — Invite only"})]}),t.type&&e.jsx("p",{className:"text-sm text-danger-600 mt-1",children:t.type})]}),r.type!=="private"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300",children:"Require Join Approval"}),e.jsx("p",{className:"text-xs text-secondary-400 mt-0.5",children:"New members must be approved before joining."})]}),e.jsx("button",{type:"button",onClick:()=>s("requires_approval",!r.requires_approval),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r.requires_approval?"bg-primary-600":"bg-secondary-300 dark:bg-secondary-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.requires_approval?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"City"}),e.jsx("input",{type:"text",value:r.city,onChange:a=>s("city",a.target.value),className:"w-full rounded-lg border-secondary-300 dark:border-secondary-600 dark:bg-secondary-800 dark:text-white focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g. Manila"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Province"}),e.jsx("input",{type:"text",value:r.province,onChange:a=>s("province",a.target.value),className:"w-full rounded-lg border-secondary-300 dark:border-secondary-600 dark:bg-secondary-800 dark:text-white focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g. Metro Manila"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:d||l==="taken",className:"px-6 py-3 bg-primary-600 hover:bg-primary-500 text-white rounded-lg font-semibold text-sm transition-colors disabled:opacity-50",children:d?"Creating...":"Create Club"})})]})})})]})}export{D as default};
