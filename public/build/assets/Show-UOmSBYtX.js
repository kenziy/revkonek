import{r as d,u as L,j as e,H as T,a as n}from"./app-CQdR452s.js";import{A as V}from"./AdminLayout-CdA9hG_1.js";import{C as r,A as z,B as x}from"./ProgressBar-CmNWRyn6.js";import{P as H}from"./ProBadge-sFMrbpXL.js";import{T as h}from"./TextInput-CTcTAe8k.js";import{I as v}from"./InputLabel-DYD7MSJ0.js";import{S as f}from"./Select-_g643YYx.js";import"./clsx-B-dksMZM.js";import"./ThemeToggle-C9625XrB.js";import"./UserGroupIcon-CBBpCl-6.js";import"./UsersIcon-C67WalTO.js";import"./SparklesIcon-B2_IIVCR.js";import"./DocumentTextIcon-DMZyM2rq.js";import"./ClipboardDocumentListIcon-ZEZdHuTT.js";import"./ArrowLeftIcon-DH5-a9EN.js";import"./ExclamationTriangleIcon-Yz6WaA5o.js";import"./CheckCircleIcon-CrWjMXvP.js";import"./CheckBadgeIcon-DlBI_QHP.js";function le({user:t,userRoles:N,userPermissions:p,allRoles:k,recentActivity:y,stats:i,activeSubscription:l,subscriptionPlans:u}){const[o,w]=d.useState("overview"),[C,c]=d.useState(!1),[g,_]=d.useState(u[0]?.id?.toString()||""),[b,S]=d.useState("1"),a=L({name:t.name,email:t.email,username:t.username||""}),[j,P]=d.useState(N),R=s=>{s.preventDefault(),a.put(route("admin.users.update",t.id))},U=()=>{n.post(route("admin.users.syncRoles",t.id),{roles:j})},A=()=>{confirm("Are you sure you want to ban this user?")&&n.post(route("admin.users.ban",t.id))},D=()=>{n.post(route("admin.users.unban",t.id))},I=()=>{n.post(route("admin.users.verify",t.id))},$=()=>{n.post(route("admin.subscriptions.grantPro",t.id),{plan_id:parseInt(g),duration_months:parseInt(b)},{onSuccess:()=>c(!1)})},B=()=>{confirm(`Are you sure you want to revoke Pro from ${t.name}?`)&&n.post(route("admin.subscriptions.revokePro",t.id))},E=s=>{P(m=>m.includes(s)?m.filter(G=>G!==s):[...m,s])},F=[{key:"overview",label:"Overview"},{key:"roles",label:"Roles & Permissions"},{key:"activity",label:"Activity"}];return e.jsxs(V,{header:`User: ${t.name}`,children:[e.jsx(T,{title:`Admin - ${t.name}`}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"lg:w-80",children:[e.jsx(r,{children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx(z,{name:t.name,size:"xl"}),e.jsx("h2",{className:"mt-3 text-lg font-semibold text-secondary-900 dark:text-white",children:t.name}),t.username&&e.jsxs("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:["@",t.username]}),e.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:t.email}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsx(x,{variant:t.is_active?"success":"danger",children:t.is_active?"Active":"Banned"}),t.email_verified_at&&e.jsx(x,{variant:"info",children:"Verified"}),t.is_premium&&e.jsx(H,{size:"md"})]}),e.jsxs("div",{className:"flex gap-2 mt-4 w-full",children:[t.is_active?e.jsx("button",{onClick:A,className:"flex-1 px-3 py-2 text-sm font-medium text-danger-600 bg-danger-50 rounded-lg hover:bg-danger-100 dark:bg-danger-900/20 dark:text-danger-400 transition-colors",children:"Ban User"}):e.jsx("button",{onClick:D,className:"flex-1 px-3 py-2 text-sm font-medium text-success-600 bg-success-50 rounded-lg hover:bg-success-100 dark:bg-success-900/20 dark:text-success-400 transition-colors",children:"Unban User"}),!t.email_verified_at&&e.jsx("button",{onClick:I,className:"flex-1 px-3 py-2 text-sm font-medium text-primary-600 bg-primary-50 rounded-lg hover:bg-primary-100 dark:bg-primary-900/20 dark:text-primary-400 transition-colors",children:"Verify Email"})]})]})}),e.jsxs(r,{className:"mt-4",children:[e.jsx("h3",{className:"font-medium text-secondary-900 dark:text-white mb-3",children:"Stats"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center p-2 bg-secondary-50 dark:bg-secondary-700/50 rounded-lg",children:[e.jsx("p",{className:"text-lg font-bold text-secondary-900 dark:text-white",children:i.clubsCount}),e.jsx("p",{className:"text-xs text-secondary-500",children:"Clubs"})]}),e.jsxs("div",{className:"text-center p-2 bg-secondary-50 dark:bg-secondary-700/50 rounded-lg",children:[e.jsx("p",{className:"text-lg font-bold text-secondary-900 dark:text-white",children:i.vehiclesCount}),e.jsx("p",{className:"text-xs text-secondary-500",children:"Vehicles"})]}),e.jsxs("div",{className:"text-center p-2 bg-secondary-50 dark:bg-secondary-700/50 rounded-lg",children:[e.jsx("p",{className:"text-lg font-bold text-secondary-900 dark:text-white",children:i.challengesSent}),e.jsx("p",{className:"text-xs text-secondary-500",children:"Sent"})]}),e.jsxs("div",{className:"text-center p-2 bg-secondary-50 dark:bg-secondary-700/50 rounded-lg",children:[e.jsx("p",{className:"text-lg font-bold text-secondary-900 dark:text-white",children:i.challengesReceived}),e.jsx("p",{className:"text-xs text-secondary-500",children:"Received"})]})]})]}),e.jsxs(r,{className:"mt-4",children:[e.jsx("h3",{className:"font-medium text-secondary-900 dark:text-white mb-3",children:"Pro Subscription"}),t.is_premium&&l?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-3 bg-success-50 dark:bg-success-900/20 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-success-700 dark:text-success-400",children:"Active Pro"}),e.jsx("p",{className:"text-xs text-success-600 dark:text-success-500 mt-0.5",children:l.plan_name||"Pro Plan"}),l.ends_at&&e.jsxs("p",{className:"text-xs text-secondary-500 mt-1",children:["Expires: ",new Date(l.ends_at).toLocaleDateString()]})]}),e.jsx("button",{onClick:B,className:"w-full px-3 py-2 text-sm font-medium text-danger-600 bg-danger-50 rounded-lg hover:bg-danger-100 dark:bg-danger-900/20 dark:text-danger-400 transition-colors",children:"Revoke Pro"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-secondary-500",children:"User is on free tier."}),C?e.jsxs("div",{className:"space-y-3 p-3 bg-secondary-50 dark:bg-secondary-700/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"grant_plan",value:"Plan"}),e.jsx(f,{id:"grant_plan",options:u.map(s=>({value:s.id,label:`${s.name} (${s.currency} ${Number(s.price).toLocaleString()})`})),value:g,onChange:s=>_(s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"grant_duration",value:"Duration (months)"}),e.jsx(f,{id:"grant_duration",options:[{value:"1",label:"1 month"},{value:"3",label:"3 months"},{value:"6",label:"6 months"},{value:"12",label:"1 year"},{value:"24",label:"2 years"}],value:b,onChange:s=>S(s.target.value),className:"mt-1"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:$,className:"flex-1 px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition-colors",children:"Confirm"}),e.jsx("button",{onClick:()=>c(!1),className:"flex-1 px-3 py-2 text-sm font-medium text-secondary-700 bg-secondary-200 rounded-lg hover:bg-secondary-300 dark:bg-secondary-600 dark:text-secondary-300 transition-colors",children:"Cancel"})]})]}):e.jsx("button",{onClick:()=>c(!0),className:"w-full px-3 py-2 text-sm font-medium text-primary-600 bg-primary-50 rounded-lg hover:bg-primary-100 dark:bg-primary-900/20 dark:text-primary-400 transition-colors",children:"Grant Pro"})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex gap-1 border-b border-secondary-200 dark:border-secondary-700 mb-6",children:F.map(s=>e.jsx("button",{onClick:()=>w(s.key),className:`px-4 py-2.5 text-sm font-medium transition-colors border-b-2 -mb-px ${o===s.key?"border-primary-600 text-primary-600 dark:text-primary-400":"border-transparent text-secondary-500 hover:text-secondary-700 dark:hover:text-secondary-300"}`,children:s.label},s.key))}),o==="overview"&&e.jsxs(r,{children:[e.jsx("h3",{className:"font-semibold text-secondary-900 dark:text-white mb-4",children:"Edit User"}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Name"}),e.jsx(h,{value:a.data.name,onChange:s=>a.setData("name",s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Email"}),e.jsx(h,{type:"email",value:a.data.email,onChange:s=>a.setData("email",s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Username"}),e.jsx(h,{value:a.data.username,onChange:s=>a.setData("username",s.target.value)})]}),e.jsx("button",{type:"submit",disabled:a.processing,className:"px-4 py-2 bg-primary-600 text-white rounded-lg text-sm font-medium hover:bg-primary-700 disabled:opacity-50 transition-colors",children:"Save Changes"})]})]}),o==="roles"&&e.jsxs(r,{children:[e.jsx("h3",{className:"font-semibold text-secondary-900 dark:text-white mb-4",children:"Roles"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:k.map(s=>e.jsx("button",{onClick:()=>E(s),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${j.includes(s)?"bg-primary-600 text-white":"bg-secondary-100 text-secondary-700 dark:bg-secondary-700 dark:text-secondary-300"}`,children:s},s))}),e.jsx("button",{onClick:U,className:"px-4 py-2 bg-primary-600 text-white rounded-lg text-sm font-medium hover:bg-primary-700 transition-colors",children:"Update Roles"}),e.jsx("h3",{className:"font-semibold text-secondary-900 dark:text-white mt-6 mb-3",children:"Current Permissions"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.map(s=>e.jsx(x,{variant:"secondary",size:"sm",children:s},s)),p.length===0&&e.jsx("p",{className:"text-sm text-secondary-500",children:"No permissions assigned."})]})]}),o==="activity"&&e.jsxs(r,{padding:"none",children:[e.jsx(r.Header,{children:e.jsx("h3",{className:"font-semibold text-secondary-900 dark:text-white",children:"Recent Activity"})}),e.jsxs("div",{className:"divide-y divide-secondary-100 dark:divide-secondary-700",children:[y.map(s=>e.jsxs("div",{className:"px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:s.action}),e.jsx("span",{className:"text-xs text-secondary-500",children:new Date(s.created_at).toLocaleString()})]}),s.ip_address&&e.jsxs("p",{className:"text-xs text-secondary-500 mt-0.5",children:["IP: ",s.ip_address]})]},s.id)),y.length===0&&e.jsx("p",{className:"px-4 py-8 text-sm text-secondary-500 text-center",children:"No activity recorded."})]})]})]})]})]})}export{le as default};
