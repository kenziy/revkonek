import{r as o,u as C,j as e,H as S,L as D,a as c}from"./app-CQdR452s.js";import{A}from"./AdminLayout-CdA9hG_1.js";import{S as E,C as F,B as L}from"./ProgressBar-CmNWRyn6.js";import{P as M}from"./Pagination-3WXCkDOi.js";import"./clsx-B-dksMZM.js";import"./ThemeToggle-C9625XrB.js";import"./UserGroupIcon-CBBpCl-6.js";import"./UsersIcon-C67WalTO.js";import"./SparklesIcon-B2_IIVCR.js";import"./DocumentTextIcon-DMZyM2rq.js";import"./ClipboardDocumentListIcon-ZEZdHuTT.js";import"./ArrowLeftIcon-DH5-a9EN.js";import"./ExclamationTriangleIcon-Yz6WaA5o.js";import"./CheckCircleIcon-CrWjMXvP.js";const U={code:"",description:"",discount_type:"percentage",discount_value:"",max_uses:"",min_amount:"",starts_at:"",expires_at:"",is_active:!0};function Q({coupons:a,filters:p}){const[y,h]=o.useState(p.search||""),[b,i]=o.useState(!1),[n,l]=o.useState(null),{data:s,setData:r,post:g,put:f,processing:x,errors:d,reset:j,clearErrors:m}=C(U),u=t=>{c.get(route("admin.club-subscriptions.coupons"),{search:t},{preserveState:!0})},v=()=>{l(null),j(),m(),i(!0)},k=t=>{l(t),r({code:t.code,description:t.description||"",discount_type:t.discount_type,discount_value:t.discount_value,max_uses:t.max_uses?.toString()||"",min_amount:t.min_amount||"",starts_at:t.starts_at?t.starts_at.slice(0,16):"",expires_at:t.expires_at?t.expires_at.slice(0,16):"",is_active:t.is_active}),m(),i(!0)},N=t=>{t.preventDefault(),n?f(route("admin.club-subscriptions.coupons.update",n.id),{onSuccess:()=>i(!1)}):g(route("admin.club-subscriptions.coupons.store"),{onSuccess:()=>i(!1)})},_=t=>{c.post(route("admin.club-subscriptions.coupons.toggle",t.id))},w=t=>{confirm(`Delete coupon "${t.code}"?`)&&c.delete(route("admin.club-subscriptions.coupons.destroy",t.id))};return e.jsxs(A,{header:"Subscription Coupons",children:[e.jsx(S,{title:"Admin - Subscription Coupons"}),e.jsx("div",{className:"mb-4",children:e.jsx(D,{href:route("admin.club-subscriptions.index"),className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400",children:"← Back to Subscriptions"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx(E,{value:y,onChange:t=>h(t.target.value),onSearch:u,onClear:()=>u(""),placeholder:"Search coupons...",className:"flex-1"}),e.jsx("button",{onClick:v,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition-colors",children:"Create Coupon"})]}),e.jsxs(F,{padding:"none",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-secondary-200 dark:border-secondary-700",children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium text-secondary-600 dark:text-secondary-400",children:"Code"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium text-secondary-600 dark:text-secondary-400",children:"Discount"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium text-secondary-600 dark:text-secondary-400",children:"Usage"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium text-secondary-600 dark:text-secondary-400",children:"Valid"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium text-secondary-600 dark:text-secondary-400",children:"Active"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium text-secondary-600 dark:text-secondary-400",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-secondary-100 dark:divide-secondary-700",children:[a.data.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-secondary-500 dark:text-secondary-400",children:"No coupons found."})}),a.data.map(t=>e.jsxs("tr",{className:"hover:bg-secondary-50 dark:hover:bg-secondary-800/50",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("span",{className:"font-mono font-medium text-secondary-900 dark:text-white",children:t.code}),t.description&&e.jsx("p",{className:"text-xs text-secondary-400 mt-0.5",children:t.description})]}),e.jsx("td",{className:"px-4 py-3 text-secondary-900 dark:text-white",children:t.discount_type==="percentage"?`${t.discount_value}%`:`₱${Number(t.discount_value).toLocaleString()}`}),e.jsxs("td",{className:"px-4 py-3 text-secondary-600 dark:text-secondary-400",children:[t.times_used,t.max_uses?` / ${t.max_uses}`:" / ∞"]}),e.jsx("td",{className:"px-4 py-3 text-xs text-secondary-600 dark:text-secondary-400",children:t.starts_at||t.expires_at?e.jsxs(e.Fragment,{children:[t.starts_at&&e.jsxs("div",{children:["From: ",new Date(t.starts_at).toLocaleDateString()]}),t.expires_at&&e.jsxs("div",{children:["To: ",new Date(t.expires_at).toLocaleDateString()]})]}):"No date limits"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(L,{variant:t.is_active?"success":"secondary",size:"sm",children:t.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>k(t),className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 text-sm font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>_(t),className:"text-accent-600 hover:text-accent-700 dark:text-accent-400 text-sm font-medium",children:t.is_active?"Disable":"Enable"}),e.jsx("button",{onClick:()=>w(t),className:"text-danger-600 hover:text-danger-700 dark:text-danger-400 text-sm font-medium",children:"Delete"})]})})]},t.id))]})]})}),e.jsx(M,{links:a.links,from:a.from,to:a.to,total:a.total})]}),b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-xl shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"px-6 py-4 border-b border-secondary-200 dark:border-secondary-700",children:e.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:n?"Edit Coupon":"Create Coupon"})}),e.jsxs("form",{onSubmit:N,className:"px-6 py-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:s.code,onChange:t=>r("code",t.target.value.toUpperCase()),className:"w-full rounded-lg border border-secondary-300 dark:border-secondary-600 bg-white dark:bg-secondary-700 text-secondary-900 dark:text-white text-sm px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 font-mono",placeholder:"e.g. PROMO50"}),d.code&&e.jsx("p",{className:"text-sm text-danger-600 mt-1",children:d.code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:s.description,onChange:t=>r("description",t.target.value),className:"w-full rounded-lg border border-secondary-300 dark:border-secondary-600 bg-white dark:bg-secondary-700 text-secondary-900 dark:text-white text-sm px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Optional description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Discount Type"}),e.jsxs("select",{value:s.discount_type,onChange:t=>r("discount_type",t.target.value),className:"w-full rounded-lg border border-secondary-300 dark:border-secondary-600 bg-white dark:bg-secondary-700 text-secondary-900 dark:text-white text-sm px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"percentage",children:"Percentage"}),e.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:["Discount Value ",s.discount_type==="percentage"?"(%)":"(₱)"]}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:s.discount_value,onChange:t=>r("discount_value",t.target.value),className:"w-full rounded-lg border border-secondary-300 dark:border-secondary-600 bg-white dark:bg-secondary-700 text-secondary-900 dark:text-white text-sm px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),d.discount_value&&e.jsx("p",{className:"text-sm text-danger-600 mt-1",children:d.discount_value})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Max Uses"}),e.jsx("input",{type:"number",min:"1",value:s.max_uses,onChange:t=>r("max_uses",t.target.value),className:"w-full rounded-lg border border-secondary-300 dark:border-secondary-600 bg-white dark:bg-secondary-700 text-secondary-900 dark:text-white text-sm px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Unlimited"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Min Amount (₱)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:s.min_amount,onChange:t=>r("min_amount",t.target.value),className:"w-full rounded-lg border border-secondary-300 dark:border-secondary-600 bg-white dark:bg-secondary-700 text-secondary-900 dark:text-white text-sm px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"No minimum"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Starts At"}),e.jsx("input",{type:"datetime-local",value:s.starts_at,onChange:t=>r("starts_at",t.target.value),className:"w-full rounded-lg border border-secondary-300 dark:border-secondary-600 bg-white dark:bg-secondary-700 text-secondary-900 dark:text-white text-sm px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Expires At"}),e.jsx("input",{type:"datetime-local",value:s.expires_at,onChange:t=>r("expires_at",t.target.value),className:"w-full rounded-lg border border-secondary-300 dark:border-secondary-600 bg-white dark:bg-secondary-700 text-secondary-900 dark:text-white text-sm px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),d.expires_at&&e.jsx("p",{className:"text-sm text-danger-600 mt-1",children:d.expires_at})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"coupon_active",checked:s.is_active,onChange:t=>r("is_active",t.target.checked),className:"h-4 w-4 rounded border-secondary-300 text-primary-600 focus:ring-primary-500"}),e.jsx("label",{htmlFor:"coupon_active",className:"text-sm text-secondary-700 dark:text-secondary-300",children:"Active"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{type:"submit",disabled:x,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50",children:x?"Saving...":n?"Update Coupon":"Create Coupon"}),e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-sm font-medium text-secondary-600 bg-secondary-100 rounded-lg hover:bg-secondary-200 dark:bg-secondary-700 dark:text-secondary-300 transition-colors",children:"Cancel"})]})]})]})})]})}export{Q as default};
